<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>com_android</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="js-core.css">
   
    <script src="../src/js-core.js"></script>
    <script src="js-core.js"></script>

    
    <style>
                
        div.flex {
            display: flex;
            flex-wrap: wrap;
        }
        
        div.flex > div {
            width:45%;
        }
        
        div.flex > div > h1 {
            margin-top:0;
        }
        
        div#sampleSizeArray input[type=text]{
            width:4em;
        }
        
        @media screen and (max-width:1024px) {
            div.flex > div {
                width:100%;
            }

        }
        
        
    </style>
    
    
    <script>
    
    var test = {
        
        dumpObject : function(o)
        {
            var ret = [];
            for ( var p in o )
                ret.push(p + ':' + o[p]);
            
            return ret.join('\n');
        },
        
        
        dumpQuerystring : function(u)
        {
            sample.output('Querystring=' + test.dumpObject(u.getQuerystringObject()) +
                            '\ntoString()=' + u.toString());
        },
        
        
        dumpUrl : function(u)
        {
            sample.output('Resource=' + u.getResource() + 
                          '\nQuerystring=' + test.dumpObject(u.getQuerystring().getQuerystringObject()) +
                                '\nQuerystring.toString()=' + u.getQuerystring().toString() +
                          '\nUrl.toString()=' + u.toString());
        },
        
        
        call : function(fun, params)
        {
            try
            {
                sample.output(fun.apply(null, params));
            }
            catch (e)
            {
                alert(e);
            }
        },
        
        
        simpleCall : function(btn)
        {
            var fun = btn.parentNode.firstChild;
            test.call(nettools.jscore[fun.textContent.split(' ')[0]], [btn.previousSibling.value]);
        },
        
        
        signObject : function()
        {
            nettools.jscore.RequestHelper.setSignOn(true,
                    function(o)
                    {
                        return {
                            elements : [o.v1, o.v2],
                            token : 'my encryption key'
                        };
                    }
                );
            
            
            var request = {
                v1 : 'my value1',
                v2 : 'my value2',
                vx : 'other value not used on signature'
            };
            
            nettools.jscore.RequestHelper.signObject(request);
            
            sample.output(test.dumpObject(request));
        },
        
        
        signForm : function(form)
        {
            
            nettools.jscore.RequestHelper.formSign(form, form.tokenfield, form.signfield);
        },
        
        
        sendXmlHTTPRequest : function(sendString)
        {
            nettools.jscore.RequestHelper.sendXmlHTTPRequest('js-core-http.php', 
                    function(resp)
                    {
                        var r = nettools.jscore.xmlhttp.parseResponse(resp);
                        sample.output('XmlHttpRequest answered : \n' + r);
                    },
                                                             
                    sendString?'v1=myvalue1&v2=&v3=1':{v1:'myvalue1', v2:'', v3:true}
                );
        },
        
        
        sendXmlHTTPRequestPromise : function(sendString)
        {
            nettools.jscore.RequestHelper.sendXmlHTTPRequestPromise('js-core-http-promise.php', sendString?'v1=myvalue1&v2=&v3=1':{v1:'myvalue1', v2:'', v3:true}). 
                    then(function(r)
                        {
                            sample.output('XmlHttpRequestPromise answered with status OK and message : \n' + r.message);
                        }).
                    catch(nettools.jscore.RequestHelper.promiseErrorHandler);
        
        }
        
    }
    
    </script>
    

</head>

<body>
    <div id="output"></div>
    

    <div class="flex">
        <div class="sampleBox">
            <h1>String functions</h1>
            <div id="sampleString">   
                <p>removeDiacritics : <input type="text"><input type="Submit" onclick="test.simpleCall(this);"></p>
                <p>escape : <input type="text"><input type="Submit" onclick="test.simpleCall(this);"></p>
                <p>unescape : <input type="text"><input type="Submit" onclick="test.simpleCall(this);"></p>
                <p>htmlentities : <input type="text"><input type="Submit" onclick="this.previousSibling.value=nettools.jscore.htmlentities(this.previousSibling.value);"></p>
                <p>querystringAppend : <input type="text" value="key1=value1"><input type="Submit" onclick="test.call(nettools.jscore.querystringAppend, [this.previousSibling.value, 'key2', '=val&2']);"></p>
                <p>appendToUrl : <input type="text" value="key2=value2"><input type="Submit" onclick="test.call(nettools.jscore.appendToUrl, ['file.php?key1=value1', this.previousSibling.value]);"></p>
                <p>appendToUrl : <input type="text" value="key2=value2"><input type="Submit" onclick="test.call(nettools.jscore.appendToUrl, ['file.php', this.previousSibling.value]);"></p>
                <p>count(sub, str) : <input type="text"><input type="text"><input type="Submit" onclick="test.call(nettools.jscore.count, [this.previousSibling.previousSibling.value, this.previousSibling.value]);"></p>
                <p>extractFileName : <input type="text"><input type="Submit" onclick="test.simpleCall(this);"></p>
                <p>selfUrl : <input type="Submit" onclick="sample.output(test.dumpObject(nettools.jscore.selfUrl()));"></p>
            </div>
             
        </div>
    
       
        <div class="sampleBox">
            <h1>Form &amp; styles functions</h1>
            <div id="sampleForm">   
                <form>
                    <input type="hidden" name="tokenfield" value="abcd">
                    <p>
                        <label><input type="radio" value="r1" name="radiobtns" checked>Radio1</label> ; 
                        <label><input type="radio" value="r2" name="radiobtns">Radio2</label>
                        Text : <input name="txt" type="text" value="My special value &quot;" data-sign="1">
                    </p>
                    <p>
                        <label><input name="chk1" value="check1" checked type="checkbox">Chk1</label> ;
                        <label><input name="chk2" value="check2" type="checkbox">Chk2</label>
                        <select name="sel" data-sign="2">
                            <option></option>
                            <option value="val1">Value1</option>
                        </select>
                    </p>
                    <p>
                        <input type="button" value="getCheckedRadioButton" onclick="sample.output(nettools.jscore.getCheckedRadioButton(this.form, 'radiobtns').value); ">
                        <input type="button" value="inputs2querystring" onclick="sample.output(nettools.jscore.inputs2querystring(this.form.elements)); ">
                        <input type="button" value="formFieldsToObject" onclick="sample.output(test.dumpObject(nettools.jscore.formFieldsToObject(this.form.elements)));">
                        <input type="button" value="signObject" onclick="test.signObject();">
                        <input type="button" value="formSign" onclick="test.signForm(this.form);">
                        <label>Signfield : <input type="text" name="signfield"></label>
                    </p>
                    <p>Url to sign : <input type="text" value="f.php?v1=val1&v2=val2"><input type="button" value="signUrl" onclick="sample.output(nettools.jscore.RequestHelper.signUrl(this.previousSibling.value, 'token', ['v1']));"></p>
                    <p>
                        <input type="button" value="sendXmlHTTPRequest(string)" onclick="test.sendXmlHTTPRequest(true);">
                        <input type="button" value="sendXmlHTTPRequest(Object)" onclick="test.sendXmlHTTPRequest(false);">
                        <input type="button" value="sendXmlHTTPRequestPromise(string)" onclick="test.sendXmlHTTPRequestPromise(true);">
                        <input type="button" value="sendXmlHTTPRequestPromise(Object)" onclick="test.sendXmlHTTPRequestPromise(false);">
                    </p>
                </form>
                <hr>
                <p>cssToJs : <input type="text" value="font-size:12px;color:white"><input type="Submit" onclick="sample.output(test.dumpObject(nettools.jscore.cssToJs(this.previousSibling.value)));"></p>
                <p>JsToCss : <input type="Submit" onclick="sample.output(nettools.jscore.jsToCss({fontSize:'12px',color:'black'}));"></p>
                <p>camelCaseToCss : <input type="text" value="fontSize"><input type="Submit" onclick="test.simpleCall(this);"></p>
                <p>cssToCamelCase : <input type="text" value="font-size"><input type="Submit" onclick="test.simpleCall(this);"></p>
            </div>
        </div>
    
       
        <div class="sampleBox">
            <h1>Size & array functions</h1>
            <div id="sampleSizeArray">   
                <p>Size.add(int, Size) : <input type="text" value="12px"><input type="text" value="15em"><input type="submit" onclick="sample.output(new nettools.jscore.Size(this.previousSibling.previousSibling.value).add(new nettools.jscore.Size(this.previousSibling.value)));"></p>
                <p>Size.subtract(int, Size) : <input type="text" value="12px"><input type="text" value="15em"><input type="submit" onclick="sample.output(new nettools.jscore.Size(this.previousSibling.previousSibling.value).subtract(new nettools.jscore.Size(this.previousSibling.value)));"></p>
                <p>Size.add(int, int) : <input type="text" value="12px"><input type="text" value="15"><input type="submit" onclick="sample.output(new nettools.jscore.Size(this.previousSibling.previousSibling.value).add(this.previousSibling.value));"></p>
                <p>Size.subtract(int, int) : <input type="text" value="12px"><input type="text" value="15"><input type="submit" onclick="sample.output(new nettools.jscore.Size(this.previousSibling.previousSibling.value).subtract(this.previousSibling.value));"></p>
                <p>arrayFilter : <input type="text" value="1,2,,,3"><input type="Submit" onclick="sample.output('[' + nettools.jscore.arrayFilter(this.previousSibling.value.split(','), true, true).join(',') + ']');"></p>
            </div>
             
        </div>
    
       
        <div class="sampleBox">
            <h1>nettools.jscore.Querystring &amp; Url</h1>
            <div id="sampleUrl">   
                <p>Querystring constructor : <input type="text" value="key1=value1&key2=%26&key3="><input type="Submit" onclick="test.dumpQuerystring(new nettools.jscore.Querystring(this.previousSibling.value));"></p>
                <p>Querystring constructor (object) : <input type="Submit" onclick="test.dumpQuerystring(new nettools.jscore.Querystring({v1:'my val', v2:null, v3:true}));"></p>
                <p>Url constructor : <input type="text" value="myfile.php?key1=value1&key2=%26&key3="><input type="Submit" onclick="test.dumpUrl(new nettools.jscore.Url(this.previousSibling.value));"></p>
                <p>Url constructor : <input type="text" value="myfile.php?"><input type="Submit" onclick="test.dumpUrl(new nettools.jscore.Url(this.previousSibling.value));"></p>
                <p>Url constructor : <input type="text" value="myfile.php"><input type="Submit" onclick="test.dumpUrl(new nettools.jscore.Url(this.previousSibling.value));"></p>
                <p>Add parameter : <input type="text" value="myfile.php?key1=value1&key2=%26"><input type="text" value="key3"><input type="text" value="v=&? /"><input type="Submit" onclick="test.dumpUrl(new nettools.jscore.Url(this.previousSibling.previousSibling.previousSibling.value).addParameter(this.previousSibling.previousSibling.value, this.previousSibling.value));"></p>
                <p>Remove key1 parameter : <input type="text" value="myfile.php?key1=value1&key2=%26"><input type="Submit" onclick="test.dumpUrl(new nettools.jscore.Url(this.previousSibling.value).removeParameter('key1'));"></p>
            </div>
        </div>
    
       
        <div class="sampleBox">
            <h1>nettools.jscore.StorageManager</h1>
            <div id="sampleStorageManager">   
                <p><input type="submit" value="fetch()" onclick="nettools.jscore.StorageManager.fetch('nettools.jscore.test_storagemanager', 'storage-manager.json', 'tmp', function(val){sample.output(val);})"></p>
            </div>
        </div>



    </div>

</body>
</html>
